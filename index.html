<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>Guess the Country World</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { margin:0; font-family:sans-serif; display:flex; justify-content:center; align-items:center; height:100vh; background:#0f172a; color:white;}
.app{width:100%; max-width:450px; background:#1e293b; padding:16px; border-radius:20px; text-align:center;}
button{padding:10px 14px; margin:5px; border:none; border-radius:10px; cursor:pointer; background:#22c55e; color:white; font-size:16px; transition:.2s;}
button:hover{background:#16a34a;}
#timer{font-size:18px;margin-bottom:8px;}
.correct{background:#10b981!important;}
.wrong{background:#ef4444!important;}
</style>
</head>
<body>
<div class="app">
<h1>ğŸŒ Guess the Country</h1>
<div id="timer">Ø²Ù…Ø§Ù†: <span id="timeLeft">10</span></div>
<img id="flag" width="150" style="margin:10px 0;">
<div id="options"></div>
<p>Ø§Ù…ØªÛŒØ§Ø²: <span id="score">0</span></p>
<button id="restartBtn" style="display:none;" onclick="startGame()">Ø´Ø±ÙˆØ¹ Ù…Ø¬Ø¯Ø¯</button>
</div>

<script>
// Ù„ÛŒØ³Øª Ú©Ø¯ ISO Ú©Ø´ÙˆØ±Ù‡Ø§ (alpha-2)
const isoCodes = [
"AF","AL","DZ","AS","AD","AO","AI","AQ","AG","AR","AM","AW","AU","AT","AZ",
"BS","BH","BD","BB","BY","BE","BZ","BJ","BM","BT","BO","BA","BW","BR","VG",
"BN","BG","BF","BI","KH","CM","CA","CV","KY","CF","TD","CL","CN","CX","CC",
"CO","KM","CG","CD","CR","CI","HR","CU","CW","CY","CZ","DK","DJ","DM","DO",
"EC","EG","SV","GQ","ER","EE","ET","FK","FO","FJ","FI","FR","GF","PF","GA",
"GM","GE","DE","GH","GI","GR","GL","GD","GP","GU","GT","GG","GN","GW","GY",
"HT","HN","HK","HU","IS","IN","ID","IR","IQ","IE","IM","IL","IT","JM","JP",
"JE","JO","KZ","KE","KI","KP","KR","KW","KG","LA","LV","LB","LS","LR","LY",
"LI","LT","LU","MO","MK","MG","MW","MY","MV","ML","MT","MH","MQ","MR","MU",
"YT","MX","FM","MD","MC","MN","ME","MS","MA","MZ","MM","NA","NR","NP","NL",
"NC","NZ","NI","NE","NG","NU","NF","MP","NO","OM","PK","PW","PA","PG","PY",
"PE","PH","PL","PT","PR","QA","RO","RU","RW","WS","SM","ST","SA","SN","RS",
"SC","SL","SG","SX","SK","SI","SB","SO","ZA","SS","ES","LK","SD","SR","SZ",
"SE","CH","SY","TW","TJ","TZ","TH","TL","TG","TK","TO","TT","TN","TR","TM",
"TC","TV","UG","UA","AE","GB","US","UY","UZ","VU","VA","VE","VN","WF","EH",
"YE","ZM","ZW"
];

let countries = [], score=0, current=null, timeLeft=10, timerInterval=null;

// Ø³Ø§Ø®Øª Ù„ÛŒØ³Øª Ú©Ø´ÙˆØ±Ù‡Ø§ Ø¨Ø§ Ù†Ø§Ù… Ùˆ Ù¾Ø±Ú†Ù…
isoCodes.forEach(code=>{
  let name = code; // Ø§Ú¯Ø± Ø®ÙˆØ§Ø³ØªÛŒ Ù…ÛŒØªÙˆÙ†ÛŒ Ø¨Ø¹Ø¯Ø§Ù‹ Ù†Ø§Ù… Ú©Ø§Ù…Ù„ Ø¨Ø°Ø§Ø±ÛŒ
  let flag = `https://flagcdn.com/w320/${code.toLowerCase()}.png`; // Ù¾Ø±Ú†Ù… Ù‡Ø± Ú©Ø´ÙˆØ± î¨2î¨‚
  countries.push({name,flag});
});

function startGame(){
  score=0;
  document.getElementById("score").innerText=score;
  document.getElementById("restartBtn").style.display="none";
  newQuestion();
}

function newQuestion(){
  clearInterval(timerInterval);
  timeLeft=10;
  document.getElementById("timeLeft").innerText=timeLeft;
  current = countries[Math.floor(Math.random()*countries.length)];

  let opts=[current.name];
  while(opts.length<4){
    let rand=countries[Math.floor(Math.random()*countries.length)].name;
    if(!opts.includes(rand)) opts.push(rand);
  }
  opts.sort(()=>Math.random()-0.5);

  document.getElementById("flag").src=current.flag;
  const div=document.getElementById("options");
  div.innerHTML="";
  opts.forEach(opt=>{
    let btn=document.createElement("button");
    btn.innerText=opt;
    btn.onclick=()=>checkAnswer(btn,opt);
    div.appendChild(btn);
  });

  timerInterval=setInterval(()=>{
    timeLeft--;
    document.getElementById("timeLeft").innerText=timeLeft;
    if(timeLeft<=0){
      clearInterval(timerInterval);
      alert(`â° Ø²Ù…Ø§Ù† ØªÙ…Ø§Ù… Ø´Ø¯!`); 
      nextQuestion();
    }
  },1000);
}

function checkAnswer(btn, selected){
  clearInterval(timerInterval);
  if(selected===current.name){
    btn.classList.add("correct");
    score++;
  } else {
    btn.classList.add("wrong");
    alert(`âŒ ØºÙ„Ø·! Ø¬ÙˆØ§Ø¨: ${current.name}`);
  }
  document.getElementById("score").innerText=score;
  setTimeout(nextQuestion,500);
}

function nextQuestion(){
  if(score>=20){
    alert(`ğŸ‰ ØªÙ…ÙˆÙ… Ø´Ø¯! Ø§Ù…ØªÛŒØ§Ø²: ${score}`);
    document.getElementById("restartBtn").style.display="block";
  } else newQuestion();
}

startGame();
</script>
</body>
</html>
